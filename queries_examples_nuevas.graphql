# ========================================
# QUERIES GRAPHQL ACTUALIZADAS
# Sistema de Inscripci贸n UAGRM
# ========================================

# ==========================================
# 1锔 PANEL COMPLETO DEL ESTUDIANTE
# ==========================================
# Esta query obtiene TODA la informaci贸n necesaria para el panel principal
# en una sola llamada, reduciendo la l贸gica del frontend

query PanelEstudiante {
  panelEstudiante(registro: "2150826") {
    estudiante {
      registro
      nombreCompleto
      nombre
      apellidoPaterno
      apellidoMaterno
    }
    carrera {
      codigo
      nombre
      tipo
      facultad
    }
    modalidad
    semestreActual
    estado
    periodoActual {
      codigo
      nombre
      inscripcionesHabilitadas
      fechaInicio
      fechaFin
    }
    opcionesDisponibles {
      fechasInscripcion
      boleta
      bloqueo
      inscripcion
    }
    inscripcionActual {
      fechaAsignada
      fechaRealizada
      estado
      bloqueado
      boletaGenerada
      numeroBoleta
    }
  }
}

# ==========================================
# 2锔 INFORMACIN DE BLOQUEOS
# ==========================================
# Obtiene informaci贸n completa de bloqueos del estudiante

query BloqueoEstudiante {
  bloqueoEstudiante(registro: "2150826") {
    bloqueado
    bloqueos {
      id
      tipo
      motivo
      fechaBloqueo
      fechaDesbloqueoEstimada
      activo
    }
    puedeInscribirse
    mensaje
  }
}

# ==========================================
# 3锔 SEMESTRES POR CARRERA (ESTRUCTURADO)
# ==========================================
# Obtiene los semestres disponibles para una carrera

query SemestresCarrera {
  semestresCarrera(codigoCarrera: "DER") {
    carrera {
      codigo
      nombre
    }
    semestres {
      numero
      nombre
      habilitado
    }
    totalSemestres
  }
}

# ==========================================
# 4锔 BOLETA DE INSCRIPCIN COMPLETA
# ==========================================
# Obtiene la boleta de inscripci贸n con todas las materias

query BoletaInscripcion {
  boletaInscripcion(registro: "2150826") {
    estudiante {
      registro
      nombreCompleto
    }
    carrera {
      codigo
      nombre
    }
    periodo {
      codigo
      nombre
    }
    numeroBoleta
    fechaGeneracion
    estado
    materiasInscritas {
      codigo
      nombre
      creditos
      grupo
      horasTeoricas
      horasPracticas
    }
    totalCreditos
    totalMaterias
  }
}

# ==========================================
# 5锔 LISTA DE CARRERAS ACTIVAS
# ==========================================
# Para la pantalla de selecci贸n de carrera

query CarrerasActivas {
  todasCarreras(activa: true) {
    id
    codigo
    nombre
    facultad
    duracionSemestres
    activa
  }
}

# ==========================================
# 6锔 PERFIL DEL ESTUDIANTE
# ==========================================
# Informaci贸n b谩sica del estudiante

query PerfilEstudiante {
  estudiantePorRegistro(registro: "2150826") {
    registro
    nombreCompleto
    nombre
    apellidoPaterno
    apellidoMaterno
    carreraActual {
      codigo
      nombre
      facultad
    }
    semestreActual
    modalidad
    planEstudios {
      codigo
      nombre
      anioVigencia
    }
    email
    telefono
    lugarOrigen
    activo
    fechaIngreso
  }
}

# ==========================================
# 7锔 MATERIAS HABILITADAS PARA INSCRIPCIN
# ==========================================
# Materias disponibles seg煤n carrera y semestre del estudiante

query MateriasHabilitadas {
  materiasHabilitadas(registro: "2150826") {
    id
    materia {
      codigo
      nombre
      creditos
      horasTeoricas
      horasPracticas
    }
    semestre
    obligatoria
    habilitada
  }
}

# ==========================================
# 8锔 PERIODO ACADMICO ACTIVO
# ==========================================
# Obtiene el periodo con inscripciones habilitadas

query PeriodoActivo {
  periodoHabilitado {
    codigo
    nombre
    tipo
    fechaInicio
    fechaFin
    activo
    inscripcionesHabilitadas
  }
}

# ==========================================
# 9锔 INSCRIPCIN COMPLETA DEL ESTUDIANTE
# ==========================================
# Informaci贸n detallada de la inscripci贸n actual

query InscripcionCompleta {
  inscripcionCompleta(registro: "2150826") {
    id
    estudiante {
      registro
      nombreCompleto
    }
    periodoAcademico {
      codigo
      nombre
    }
    fechaInscripcionAsignada
    fechaInscripcionRealizada
    estado
    boletaGenerada
    numeroBoleta
    materiasInscritas {
      materia {
        codigo
        nombre
        creditos
      }
      grupo
    }
  }
}

# ==========================================
#  TODOS LOS BLOQUEOS (ADMIN)
# ==========================================
# Para administradores: ver todos los bloqueos

query TodosBloqueos {
  todosBloqueos {
    id
    estudiante {
      registro
      nombreCompleto
    }
    tipo
    motivo
    fechaBloqueo
    fechaDesbloqueoEstimada
    activo
    resuelto
    fechaResolucion
  }
}

# ==========================================
# QUERIES DE COMPATIBILIDAD
# ==========================================
# Estas queries mantienen compatibilidad con c贸digo existente

# Fecha de inscripci贸n
query FechaInscripcion {
  fechaInscripcionEstudiante(registro: "2150826")
}

# Estado de bloqueo (boolean)
query EstadoBloqueo {
  estadoBloqueoEstudiante(registro: "2150826")
}

# Motivo de bloqueo
query MotivoBloqueo {
  motivoBloqueoEstudiante(registro: "2150826")
}

# Semestres por carrera (lista simple de n煤meros)
query SemestresSimple {
  semestresPorCarrera(codigoCarrera: "DER")
}

# ==========================================
# EJEMPLOS DE USO EN EL FRONTEND
# ==========================================

# Ejemplo 1: Cargar panel principal al iniciar sesi贸n
# Uso: Una sola llamada obtiene toda la info necesaria
query CargarPanelInicial {
  panelEstudiante(registro: "2150826") {
    estudiante { nombreCompleto }
    carrera { nombre }
    estado
    opcionesDisponibles {
      fechasInscripcion
      boleta
      bloqueo
      inscripcion
    }
  }
}

# Ejemplo 2: Verificar si puede inscribirse
query PuedeInscribirse {
  bloqueoEstudiante(registro: "2150826") {
    puedeInscribirse
    mensaje
  }
}

# Ejemplo 3: Mostrar boleta si est谩 disponible
query MostrarBoleta {
  boletaInscripcion(registro: "2150826") {
    numeroBoleta
    materiasInscritas {
      codigo
      nombre
      creditos
    }
    totalCreditos
  }
}
